<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    
    <head>
        <h:outputScript library="js" name="calendar.js" />
    </head>
    <body>

        <ui:composition template="./../WEB-INF/Template/plantillaPublico.xhtml">

            <ui:define name="content">
               
                    <h1>FORMULARIO DE REGISTRO COMO PACIENTE EN HEALTHCARE</h1>
                    <p:fieldset legend="Datos personales">
                        <p:panelGrid columns="3" layout="grid" styleClass="showcase-text-align-center" style="border:0px none; background-color: transparent; align-content: left">
                            <p:outputLabel for="txtNombre" value="Nombre:"/>
                            <p:inputText value="#{usuarioController.persona.nombre}" required="true" requiredMessage="El nombre es un campo obligatorio"
                                         id="txtNombre"/>
                                         <p:message for="txtNombre"/>
                            <p:outputLabel for="txtApellido1" value="Primer apellido:"/>
                            <p:inputText value="#{usuarioController.persona.apellido1}" required="true" requiredMessage="El primer apellido es un campo obligatorio"
                                         id="txtApellido1"/>
                                         <p:message for="txtApellido1"/>
                            <p:outputLabel for="txtApellido2" value="Segundo apellido:"/>
                            <p:inputText value="#{usuarioController.persona.apellido2}"  requiredMessage="El segundo apellido es un campo obligatorio"
                                         id="txtApellido2"/>
                                         <p:message for="txtApellido2"/>

                            <p:outputLabel for="sexo" value="Sexo: "/>
                            <p:selectOneButton value="#{usuarioController.persona.sexo}" id="sexo" required="true" requiredMessage="El sexo es un campo obligatorio">
                                <f:selectItem itemLabel="Masculino" itemValue="M"/>
                                <f:selectItem itemLabel="Femenino" itemValue="F"/>
                            </p:selectOneButton>
                            <p:message for="sexo"/>

                            <p:outputLabel for="fecha" value="Fecha de nacimiento:"/>
                            <p:calendar  value="#{usuarioController.persona.fechaNacimiento}" 
                                         locale="es" pattern="dd/MM/yyyy"
                                         required="true" requiredMessage="La fecha de nacimiento es un campo obligatorio"
                                         id="fecha"/>
                                         <p:message for="fecha"/>

                            <p:outputLabel for="direccion" value="Dirección:"/>
                            <p:inputText value="#{usuarioController.persona.direccion}" required="true" requiredMessage="La dirección es un campo obligatorio"
                                         id="direccion"/>
                                         <p:message for="direccion"/>
                            <p:outputLabel for="telefono" value="Teléfono:"/>
                            <p:inputText value="#{usuarioController.persona.telefono}" required="true" requiredMessage="El número de teléfono es un campo obligatorio"
                                         id="telefono"/>
                                         <p:message for="telefono"/>
                            <p:outputLabel for="numeroSS" value="Número de la seguridad social:"/>
                            <p:inputText value="#{usuarioController.persona.numeroSS}" required="true" requiredMessage="El número de la seguridad social es un campo obligatorio"
                                         id="numeroSS"/>
                                         <p:message for="numeroSS"/>
                        </p:panelGrid>
                    </p:fieldset>
                    <p:fieldset legend="Datos de acceso">
                        <p:panelGrid columns="3" layout="grid" styleClass="showcase-text-align-center" style="border:0px none; background-color: transparent; align-content: left">

                            <p:outputLabel for="txtUser" value="Nombre de usuario:"/>
                            <p:inputText value="#{usuarioController.usuario.user}" required="true" requiredMessage="El nombre de usuario es un campo obligatorio"
                                         id="txtUser"/>
                                         <p:message for="txtUser"/>

                            <p:outputLabel for="contra1" value="Contraseña: "/>
                            <p:password id="contra1" value="#{usuarioController.usuario.password}" match="nonFeedback" required="true" requiredMessage="La contraseña es un campo obligatorio"
                                         />
                                         <p:message for="contra1"/>

                            <p:outputLabel for="nonFeedback" value="Comprobar contraseña" />
                            <p:password id="nonFeedback" required="true"  requiredMessage="Repetir contraseña es un campo obligatorio"
                                         />
                                         <p:message for="nonFeedback"/>
                                         
                            <p:outputLabel for="seleccionarTipo" value="Tipo de usuario" />
                            <p:selectOneMenu id="seleccionarTipo" value="#{usuarioController.tipoAltaUsuario}"
                                hideNoSelectionOption="#{not empty usuarioController.tipoAltaUsuario}"
                                disabled="#{!usuarioController.tipoActivado()}">
                                
                                <f:selectItem itemLabel="Selecciona un tipo de usuario" itemValue="#{null}" noSelectionOption="true"/>
                                <f:selectItem itemLabel="Médico" itemValue="0"/>
                                <f:selectItem itemLabel="Auxiliar" itemValue="1"/>
                                <f:selectItem itemLabel="Paciente" itemValue="2"/>
                            </p:selectOneMenu>
                            <p:message for="seleccionarTipo"/>
                            
                            <p:selectOneMenu id="seleccionarEspecialidad" value="Especialidad"
                                hideNoSelectionOption="#{not empty usuarioController.tipoAltaUsuario}"
                                disabled="#{!usuarioController.tipoActivado()}">
                                
                                <f:selectItem itemLabel="Selecciona la especialidad del médico" itemValue="#{null}" noSelectionOption="true"/>
                                <f:selectItem itemLabel="Cardiología" itemValue="Cardiologia"/>
                                <f:selectItem itemLabel="Neurología" itemValue="Neurologia"/>
                                <f:selectItem itemLabel="Médico de familia" itemValue="Familia"/>
                                <f:selectItem itemLabel="Traumatología" itemValue="Traumatologia"/>
                            </p:selectOneMenu>
                            <p:message for="seleccionarTipo"/>
                            
                        </p:panelGrid>
                        
                    </p:fieldset>

                    <p:commandButton value="Registrar" update="@form" action="#{usuarioController.insertarUsuario()}"></p:commandButton>

                
            </ui:define>

        </ui:composition>

    </body>
</html>
